/*!
 * Crocodoc Viewer v2.0.1-alpha | (c) 2013 Box
 */

var Crocodoc=function(){"use strict";var e={},t={};return{ZOOM_FIT_WIDTH:"fitwidth",ZOOM_FIT_HEIGHT:"fitheight",ZOOM_AUTO:"auto",ZOOM_IN:"in",ZOOM_OUT:"out",SCROLL_PREVIOUS:"previous",SCROLL_NEXT:"next",PAGE_STATUS_CONVERTING:"converting",PAGE_STATUS_NOT_LOADED:"not loaded",PAGE_STATUS_LOADING:"loading",PAGE_STATUS_LOADED:"loaded",LAYOUT_VERTICAL:"vertical",LAYOUT_VERTICAL_SINGLE_COLUMN:"vertical-single-column",LAYOUT_HORIZONTAL:"horizontal",LAYOUT_PRESENTATION:"presentation",LAYOUT_PRESENTATION_TWO_PAGE:"presentation-two-page",addModule:function(t,o){e[t]={creator:o}},createModuleInstance:function(t,o){var a=e[t];return a?a.creator(o):null},createViewer:function(e,t){var o=new Crocodoc.Scope(this),a=o.createModuleInstance("viewer-api");return a.init(e,t),a},addService:function(e,o){t[e]={creator:o,instance:null}},getService:function(e){var o=t[e];return o?(o.instance||(o.instance=o.creator(this)),o.instance):null}}}();Crocodoc.Scope=function(){"use strict";return function(e){var t=e.getService("util"),o=[];this.createModuleInstance=function(t){var a=e.createModuleInstance(t,this);return a&&(a.moduleName=t,o.push(a)),a},this.removeModuleInstance=function(e){var t,a;for(t=0,a=o.length;a>t;++t)if(e===o[t]){"function"==typeof e.destroy&&e.destroy(),o.splice(t,1);break}},this.destroy=function(){var e,t,a;for(e=0,t=o.length;t>e;++e)a=o[e],"function"==typeof a.destroy&&a.destroy();o.length=0},this.broadcast=function(e,t){var a,i,n,s;for(a=0,i=o.length;i>a;++a)n=o[a],s=n.messages||[],-1!==$.inArray(e,s)&&"function"==typeof n.onmessage&&n.onmessage.call(n,e,t)},this.mixinModule=function(o,a){var i=e.createModuleInstance(a,this);return t.extend(o,i)},this.getService=function(t){return e.getService(t)}}}(),function(){"use strict";Crocodoc.EventTarget=function(){this._handlers={}},Crocodoc.EventTarget.prototype={constructor:Crocodoc.EventTarget,on:function(e,t){"undefined"==typeof this._handlers[e]&&(this._handlers[e]=[]),this._handlers[e].push(t)},fire:function(e,t){var o,a,i,n={type:e,data:t};if(o=this._handlers[n.type],o instanceof Array)for(a=0,i=o.length;i>a;a++)o[a]&&o[a].call(this,n);if(o=this._handlers.all,o instanceof Array)for(a=0,i=o.length;i>a;a++)o[a]&&o[a].call(this,n)},off:function(e,t){var o,a,i=this._handlers[e];if(i instanceof Array){if(!t)return i.length=0,void 0;for(o=0,a=i.length;a>o;o++)if(i[o]===t||i[o].handler===t){i.splice(o,1);break}}},one:function(e,t){var o=this,a=function(i){o.off(e,a),t.call(o,i)};a.handler=t,this.on(e,a)}}}(),Crocodoc.Viewer=function(){"use strict";return{defaults:{url:null,page:1,layout:Crocodoc.LAYOUT_VERTICAL,enableTextSelection:!0,enableLinks:!0}}}(),Crocodoc.addService("browser",function(){"use strict";var e,t,o,a,i,n,s=navigator.userAgent,r={};return e=/iphone|ipod|ipad/i.test(s),t=/android/i.test(s),a=/webos/i.test(s),o=/blackberry/i.test(s),i=/blackberry/i.test(s),n=/MSIE/i.test(s),n&&(r.ie=!0,r.version=parseFloat(/MSIE\s+(\d+\.\d+)/i.exec(s)[1]),r.ielt9=r.version<9,r.ielt10=r.version<10),e&&(r.ios=!0),r.mobile=/mobile/i.test(s)||e||t||o||a||i,r.firefox=/firefox/i.test(s),/safari/i.test(s)&&(r.chrome=/chrome/i.test(s),r.safari=!r.chrome),r}),Crocodoc.addService("subpx",function(e){"use strict";function t(){if(!$.support.leadingWhitespace)return!1;var e=$(i.template(a,{size:12.5})).appendTo(document.documentElement).get(0),t=$(e).css("font-size");$(e).remove(),e=$(i.template(a,{size:12.6})).appendTo(document.documentElement).get(0);var o=$(e).css("font-size");return $(e).remove(),t!==o||"ontouchstart"in window?!0:!1}var o="crocodoc-subpx-fix",a='<span style="font-size:{{size}}px;"></span>',i=e.getService("util"),n=t();return{fix:function(e){if(!n){var t=$("<div>").addClass(o);$(e).children().wrapAll(t)}return e}}}),Crocodoc.addService("support",function(){"use strict";function e(e){var o=document.createElement("div");if(e in o.style)return e;var a=["Moz","Webkit","O","ms"],i=e.charAt(0).toUpperCase()+e.substr(1);if(e in o.style)return e;for(var n=0;n<a.length;++n){var s=a[n]+i;if(s in o.style)return t(s)}}function t(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}var o={};o.svg=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),o.csstransform=!!e("transform"),o.csstransition=!!e("transition"),o.csszoom=!!e("zoom"),o.fullscreen=function(){return"function"==typeof document.webkitCancelFullScreen||"function"==typeof document.mozCancelFullScreen||"function"==typeof document.cancelFullScreen||"function"==typeof document.exitFullscreen}();var a,i;return function(){for(var e=0,t=["ms","moz","webkit","o"],o=0;o<t.length&&!a;++o)a=window[t[o]+"RequestAnimationFrame"],i=window[t[o]+"CancelAnimationFrame"]||window[t[o]+"CancelRequestAnimationFrame"];a||(a=function(t){var o=(new Date).getTime(),a=Math.max(0,16-(o-e)),i=window.setTimeout(function(){t(o+a)},a);return e=o+a,i}),i||(i=function(e){clearTimeout(e)})}(),o.requestAnimationFrame=function(){return a.apply(window,arguments)},o.cancelAnimationFrame=function(){return i.apply(window,arguments)},o}),Crocodoc.addService("util",function(){"use strict";var e={};return e.extend=$.extend,e.each=$.each,e.map=$.map,$.extend(e,{bisectLeft:function(e,t,o){var a=0,i=e.length;if(o)for(;i>a&&e[a][o]<t;)a++;else for(;i>a&&e[a]<t;)a++;return a},bisectRight:function(e,t,o){var a=e.length-1;if(o)for(;a>0&&e[a][o]>t;)a--;else for(;a>0&&e[a]>t;)a--;return a},clamp:function(e,t,o){return t>e?t:e>o?o:e},isFn:function(e){return"function"==typeof e},inArray:function(t,o){return e.isFn(o.indexOf)?o.indexOf(t):$.inArray(t,o)},constrainRange:function(t,o,a){var i=o-t;return t=e.clamp(t,0,a),o=e.clamp(t+i,0,a),i>o-t&&(t=e.clamp(o-i,0,a)),{min:t,max:o}},makeAbsolute:function(e){var t=window.location,o=t.pathname;return/^http|^\/\//i.test(e)?e:("/"!==e.charAt(0)&&(o.lastIndexOf("/")!==o.length-1&&(o=o.substring(0,o.lastIndexOf("/")+1)),e=o+e),t.protocol+"//"+t.host+e)},throttle:function(e,t){var o,a,i,n,s=0,r=function(){s=new Date,i=null,n=e.apply(o,a)};return function(){var c=new Date,l=t-(c-s);return o=this,a=arguments,0>=l?(clearTimeout(i),i=null,s=c,n=e.apply(o,a)):i||(i=setTimeout(r,l)),n}},insertStylesheet:function(e){var t;return document.createStyleSheet?t=document.createStyleSheet(e).owningElement:(t=document.createElement("link"),t.type="text/css",t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)),t},getSelectedNode:function(){var e,t,o;return window.getSelection?(t=window.getSelection(),t.rangeCount&&(o=t.getRangeAt(0),o.collapsed||(e=t.anchorNode.parentNode))):document.selection&&(e=document.selection.createRange().parentElement()),e},getComputedStyle:function(e){return window.getComputedStyle&&window.getComputedStyle(e)||e.currentStyle},calculatePtSize:function(){var t=document.createElement("div");t.style.position="absolute",t.style.width="10000pt",document.body.appendChild(t);var o=e.getComputedStyle(t).width,a=parseFloat(o)/1e4;return document.body.removeChild(t),a},template:function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e=e.replace(new RegExp("\\{\\{"+o+"\\}\\}","g"),t[o]));return e}})}),Crocodoc.addModule("layout-base",function(e){"use strict";function t(){return g.csstransform&&!h.firefox&&!h.ielt10}var o="crocodoc-layout-",a="crocodoc-current-page",i="crocodoc-page-",n=i+"visible",s="padding-",r=s+"top",c=s+"right",l=s+"left",u=s+"bottom",d=e.getService("util"),g=e.getService("support"),h=e.getService("browser");return{messages:["resize","scroll","afterscroll"],onmessage:function(e,t){switch(e){case"resize":this.handleResize(t);break;case"scroll":this.handleScroll(t);break;case"afterscroll":this.handleAfterscroll(t)}},init:function(e){this.config=e,this.$el=e.$el,this.$doc=e.$doc,this.$viewport=e.$viewport,this.$pages=e.$pages,this.$pagesWrapper=e.$pagesWrapper,this.numPages=e.numPages,this.zoomStrategy=t()?"transform":"resize",this.layoutClass=o+e.layout,this.$el.addClass(this.layoutClass),this.initState(),this.initZoomLevels(),this.updatePageStates()},initState:function(){this.state={pages:[],widestPage:{index:0,actualWidth:0},tallestPage:{index:0,actualHeight:0},sumWidths:0,sumHeights:0,rows:[],scrollTop:this.$viewport.scrollTop(),scrollLeft:this.$viewport.scrollLeft(),viewportWidth:this.$viewport.width(),viewportHeight:this.$viewport.height(),zoomState:{zoom:1,prevZoom:0,zoomMode:null},currentPage:null,visiblePages:[],initialWidth:0,initialHeight:0},this.zoomLevels=[]},destroy:function(){this.$pagesWrapper.add(this.$doc).removeAttr("style"),this.$pages.css("padding",""),this.$el.removeClass(this.layoutClass)},setZoom:function(t){var o,a=this.state,i=this.parseZoomValue(t),n=a.zoomState,s=n.zoom;switch(i){case this.calculateZoomValue(Crocodoc.ZOOM_AUTO):n.zoomMode=Crocodoc.ZOOM_AUTO;break;case this.calculateZoomValue(Crocodoc.ZOOM_FIT_WIDTH):n.zoomMode=Crocodoc.ZOOM_FIT_WIDTH;break;case this.calculateZoomValue(Crocodoc.ZOOM_FIT_HEIGHT):n.zoomMode=Crocodoc.ZOOM_FIT_HEIGHT;break;default:n.zoomMode=null}i=d.clamp(i,a.minZoom,a.maxZoom),"transform"===this.zoomStrategy?this.applyZoomTransform(i):"resize"===this.zoomStrategy&&this.applyZoomResize(i),n.prevZoom=s,n.zoom=i,n.canZoomIn=this.calculateNextZoomLevel(Crocodoc.ZOOM_IN)!==!1,n.canZoomOut=this.calculateNextZoomLevel(Crocodoc.ZOOM_OUT)!==!1,this.updatePageStates(),this.updateLayout(),o=t===Crocodoc.ZOOM_AUTO||t===Crocodoc.ZOOM_FIT_WIDTH||t===Crocodoc.ZOOM_FIT_HEIGHT,this.updateScrollPosition(o),this.updatePageStates(),e.broadcast("zoom",d.extend({page:a.currentPage,visiblePages:d.extend([],a.visiblePages)},n))},parseZoomValue:function(e){var t=parseFloat(e),o=this.state,a=o.zoomState,i=a.zoom,n=i;if(t)n=t;else switch(e){case Crocodoc.ZOOM_FIT_WIDTH:case Crocodoc.ZOOM_FIT_HEIGHT:case Crocodoc.ZOOM_AUTO:n=this.calculateZoomValue(e);break;case Crocodoc.ZOOM_IN:case Crocodoc.ZOOM_OUT:n=this.calculateNextZoomLevel(e)||i;break;default:n=i?a.zoomMode?this.calculateZoomValue(a.zoomMode):i:this.calculateZoomValue(this.config.zoom||Crocodoc.ZOOM_AUTO)}return n},calculateNextZoomLevel:function(e){var t,o=(this.config,!1),a=this.state.zoomState.zoom,i=this.zoomLevels.slice(),n=this.calculateZoomValue(Crocodoc.ZOOM_AUTO),s=this.calculateZoomValue(Crocodoc.ZOOM_FIT_WIDTH),r=this.calculateZoomValue(Crocodoc.ZOOM_FIT_HEIGHT),c=[s,r];if(n!==s&&n!==r&&c.push(n),i=i.concat(c),i.sort(function(e,t){return e-t}),e===Crocodoc.ZOOM_IN){for(t=0;t<i.length;++t)if(i[t]>a){o=i[t];break}}else if(e===Crocodoc.ZOOM_OUT)for(t=i.length-1;t>=0;--t)if(i[t]<a){o=i[t];break}return o},calculateZoomValue:function(e){var t=this.state,o=parseFloat(e);return o?o:e===Crocodoc.ZOOM_FIT_WIDTH?t.viewportWidth/t.widestPage.totalActualWidth:e===Crocodoc.ZOOM_FIT_HEIGHT?t.viewportHeight/t.tallestPage.totalActualHeight:e===Crocodoc.ZOOM_AUTO?this.calculateZoomAutoValue():t.zoomState.zoom},applyZoomTransform:function(e){var t,o=this.state,a=(o.pages,e.toFixed(4));t=this.config.enable3dTransforms?"scale3d("+a+","+a+",1)":"scale("+a+")",this.$pagesWrapper.css({transform:t})},applyZoomResize:function(e){var t,o,a,i=this.state,n=i.pages;for(t=0,o=n.length;o>t;++t)a=n[t],this.config.pages[t].resize(e,{width:a.actualWidth*e,height:a.actualHeight*e,paddingTop:a.paddingTop*e,paddingRight:a.paddingRight*e,paddingBottom:a.paddingBottom*e,paddingLeft:a.paddingLeft*e})},scrollTo:function(e){var t=this.state,o=parseInt(e,10);if("string"==typeof e){if(e===Crocodoc.SCROLL_PREVIOUS&&t.currentPage>1)o=this.calculatePreviousPage();else if(e===Crocodoc.SCROLL_NEXT&&t.currentPage<this.numPages)o=this.calculateNextPage();else if(!o)return}else if(!o&&0!==o)return;o=d.clamp(o,1,this.numPages),this.scrollToPage(o)},scrollBy:function(e,t){e=parseInt(e,10)||0,t=parseInt(t,10)||0,this.scrollToOffset(e+this.state.scrollTop,t+this.state.scrollLeft)},scrollToPage:function(e){var t=this.calculateScrollPositionForPage(e);this.scrollToOffset(t.top,t.left)},calculateCurrentPage:function(){return this.state.currentPage},calculateScrollPositionForPage:function(e){var t=d.clamp(e-1,0,this.numPages-1),o=this.state.pages[t];return{top:o.y0,left:o.x0}},calculateVisibleRange:function(){var e=this.state,t=e.scrollTop,o=t+e.viewportHeight,a=e.scrollLeft,i=a+e.viewportWidth,n=d.bisectLeft(e.pages,t,"y1"),s=d.bisectRight(e.pages,o,"y0"),r=d.bisectLeft(e.pages,a,"x1"),c=d.bisectRight(e.pages,i,"x0"),l=Math.max(r,n),u=Math.min(c,s);return d.constrainRange(l,u,this.numPages-1)},scrollToOffset:function(e,t){this.$viewport.scrollTop(e),this.$viewport.scrollLeft(t)},setCurrentPage:function(t){var o=this.state;o.currentPage!==t?(this.$pagesWrapper.find("."+a).removeClass(a),this.$pages.eq(t-1).addClass(a),o.currentPage=t,this.updateVisiblePages(),e.broadcast("pagefocus",{page:o.currentPage,numPages:this.numPages,visiblePages:d.extend([],o.visiblePages)})):this.updateVisiblePages()},updateVisiblePages:function(){var e,t,o,a,i=this.state,s=this.calculateVisibleRange();for(i.visiblePages.length=0,e=0,t=this.$pages.length;t>e;++e)o=this.$pages.eq(e),a=o.hasClass(n),e<s.min||e>s.max?a&&o.removeClass(n):(a||o.addClass(n),i.visiblePages.push(e+1))},updatePageStates:function(){var e,t,o,a,i,n,s,g,h,p,f=this.state,m=f.zoomState.zoom||1,v=f.pages,T=f.rows,S=this.$viewport.scrollTop(),w=this.$viewport.scrollLeft(),b=this.$el.offset(),C=0,P=0;for(T.length=f.sumWidths=f.sumHeights=0,f.widestPage.totalActualWidth=f.tallestPage.totalActualHeight=0,o=0,a=this.$pages.length;a>o;++o)s=this.$pages.eq(o),n=s[0],g=n.getBoundingClientRect(),h=g.top+S-b.top,p=g.left+w-b.left,i=v[o]||{index:o},"resize"===this.zoomStrategy&&(t=d.getComputedStyle(n),e=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft].join(" "),s.css("padding","")),i.paddingLeft=parseFloat(s.css(l)),i.paddingRight=parseFloat(s.css(c)),i.paddingTop=parseFloat(s.css(r)),i.paddingBottom=parseFloat(s.css(u)),"resize"===this.zoomStrategy&&s.css("padding",e),i.width=g.width,i.height=g.height,i.y0=h,i.y1=g.height+h,i.x0=p,i.x1=g.width+p,i.actualWidth||(i.actualWidth=parseFloat(n.getAttribute("data-width"))),i.actualHeight||(i.actualHeight=parseFloat(n.getAttribute("data-height"))),i.totalActualWidth=i.actualWidth+i.paddingLeft+i.paddingRight,i.totalActualHeight=i.actualHeight+i.paddingTop+i.paddingBottom,P&&Math.abs(h-P)<m&&C++,P=i.y1,T[C]||(T[C]=[]),i.totalActualWidth>f.widestPage.totalActualWidth&&(f.widestPage=i),i.totalActualHeight>f.tallestPage.totalActualHeight&&(f.tallestPage=i),f.sumWidths+=i.width,f.sumHeights+=i.height,i.row=C,v[o]=i,T[C].push(o);f.scrollTop=S,f.scrollLeft=w,this.setCurrentPage(this.calculateCurrentPage())},initZoomLevels:function(){this.zoomLevels=this.config.zoomLevels||[1],this.state.minZoom=this.config.minZoom||this.zoomLevels[0],this.state.maxZoom=this.config.maxZoom||this.zoomLevels[this.zoomLevels.length-1]},updateCurrentPage:function(){var e=this.calculateCurrentPage();this.setCurrentPage(e)},handleResize:function(e){var t=this.state.zoomState.zoomMode;this.state.viewportWidth=e.width,this.state.viewportHeight=e.height,this.updatePageStates(),this.setZoom(t)},handleScroll:function(e){this.state.scrollTop=e.scrollTop,this.state.scrollLeft=e.scrollLeft},handleAfterscroll:function(e){this.handleScroll(e)},updateScrollPosition:function(e){var t,o,a=this.state,i=a.zoomState,n=i.zoom/i.prevZoom;t=a.scrollLeft*n,o=a.scrollTop*n,e!==!0&&(o+=a.viewportHeight*(n-1)/2,t+=a.viewportWidth*(n-1)/2),this.$viewport.scrollLeft(t),this.$viewport.scrollTop(o)},updateLayout:function(){},calculateZoomAutoValue:function(){return 1}}}),Crocodoc.addModule("layout-horizontal",function(e){"use strict";var t=e.getService("util"),o=e.getService("browser"),a=e.mixinModule({},"layout-base"),i={init:a.init,handleResize:a.handleResize,handleScroll:a.handleScroll,updateLayout:a.updateLayout};return t.extend(a,{calculateZoomAutoValue:function(){var e=this.state,t=this.calculateZoomValue(Crocodoc.ZOOM_FIT_WIDTH),a=this.calculateZoomValue(Crocodoc.ZOOM_FIT_HEIGHT);return e.widestPage.actualWidth>e.tallestPage.actualHeight?Math.min(t,a):o.mobile?a:Math.min(1,a)},calculateCurrentPage:function(){var e,o,a=this.state,i=a.pages;return e=t.bisectRight(i,a.scrollLeft,"x0"),o=t.bisectRight(i,a.scrollLeft+i[e].width/2,"x0"),1+o},calculateNextPage:function(){return this.state.currentPage+1},calculatePreviousPage:function(){return this.state.currentPage-1},handleResize:function(e){i.handleResize.call(this,e),this.updateCurrentPage()},handleScroll:function(e){i.handleScroll.call(this,e),this.updateCurrentPage()},updateLayout:function(){var e=this.state,t=e.zoomState,o=t.zoom,a=e.sumWidths,i=Math.floor(e.tallestPage.totalActualHeight*o),n=Math.max(a,e.viewportWidth),s=Math.max(i,e.viewportHeight),r=Math.floor(n/o),c=Math.floor(s/o);"resize"===this.zoomStrategy&&(c=s,r=n),this.$pagesWrapper.css({height:c,lineHeight:c+"px",width:r}),this.$doc.css({height:s,width:n})}})}),Crocodoc.addModule("layout-presentation-two-page",function(e){"use strict";var t=e.getService("util"),o=e.mixinModule({},"layout-"+Crocodoc.LAYOUT_PRESENTATION),a={init:o.init};return t.extend(o,{init:function(e){e.layout=Crocodoc.LAYOUT_PRESENTATION_TWO_PAGE,this.twoPageMode=!0,a.init.call(this,e)}})}),Crocodoc.addModule("layout-presentation",function(e){"use strict";var t="crocodoc-page-",o=t+"prev",a=t+"next",i=t+"before",n=t+"after",s=t+"before-buffer",r=t+"after-buffer",c=[a,n,o,i,s,r].join(" "),l=e.getService("util"),u=e.mixinModule({},"layout-base"),d={init:u.init,destroy:u.destroy,setCurrentPage:u.setCurrentPage,calculateZoomValue:u.calculateZoomValue,updateLayout:u.updateLayout};return l.extend(u,{init:function(e){d.init.call(this,e),this.updatePageMargins(),this.updatePageClasses()},destroy:function(){d.destroy.call(this),this.$pages.css({margin:"",left:""}).removeClass(c)},calculateZoomAutoValue:function(){var e=this.calculateZoomValue(Crocodoc.ZOOM_FIT_WIDTH),t=this.calculateZoomValue(Crocodoc.ZOOM_FIT_HEIGHT);return Math.min(e,t)},calculateZoomValue:function(e){var t=d.calculateZoomValue.call(this,e);return e===Crocodoc.ZOOM_FIT_WIDTH&&this.twoPageMode&&(t/=2),t},calculateCurrentPage:function(){return this.state.currentPage},calculateNextPage:function(){return this.state.currentPage+(this.twoPageMode?2:1)},calculatePreviousPage:function(){return this.state.currentPage-(this.twoPageMode?2:1)},calculateVisibleRange:function(){var e=this.state.currentPage-1,t=e+(this.twoPageMode?1:0);return l.constrainRange(e,t,this.numPages)},setCurrentPage:function(e){var t=l.clamp(e-1,0,this.numPages);d.setCurrentPage.call(this,e),this.updatePageClasses(t)},scrollToPage:function(e){this.twoPageMode&&(e-=(e+1)%2),this.setCurrentPage(e)},updateLayout:function(){var e,t,o,a,i,n,s,r=this.state,c=r.zoomState,l=c.zoom,u=this.currentPage||1,d=r.pages[u-1],g=this.twoPageMode?r.pages[u]:d;e=g.actualWidth,t=d.actualWidth+(this.twoPageMode?e:0),o=d.actualHeight,a=Math.floor((t+d.paddingLeft+g.paddingRight)*l),i=Math.floor(d.totalActualHeight*l),n=Math.max(a,r.viewportWidth),s=Math.max(i,r.viewportHeight),this.$pagesWrapper.add(this.$doc).css({width:n,height:s}),this.updatePageMargins(),n>r.viewportWidth||s>r.viewportHeight?this.$el.addClass("crocodoc-scrollable"):this.$el.removeClass("crocodoc-scrollable")},updatePageMargins:function(){var e,t,o,a,i,n,s,r,c,l=this.state;for(e=0,t=this.$pages.length;t>e;++e)o=this.$pages.eq(e),a=l.pages[e],c=this.twoPageMode?1===e%2?a.paddingRight:a.paddingLeft:a.paddingRight+a.paddingLeft,i=(a.actualWidth+c)*l.zoomState.zoom,n=(a.actualHeight+a.paddingTop+a.paddingBottom)*l.zoomState.zoom,this.twoPageMode?(s=Math.max(0,(l.viewportWidth-2*i)/2),1===e%2&&(s+=i)):s=(l.viewportWidth-i)/2,r=(l.viewportHeight-n)/2,"transform"===this.zoomStrategy&&(s/=l.zoomState.zoom||1,r/=l.zoomState.zoom||1),s=Math.max(s,0),r=Math.max(r,0),o.css({marginLeft:s,marginTop:r})},updatePageClasses:function(){var e=this.$pages,t=this.state.currentPage-1,l=t+1,u=t-1,d=20;e.removeClass(c),this.twoPageMode?(l=t+2,u=t-2,e.slice(Math.max(u,0),t).addClass(o),e.slice(l,l+2).addClass(a)):(u>=0&&e.eq(u).addClass(o),l<this.numPages&&e.eq(l).addClass(a)),e.slice(0,t).addClass(i),e.slice(Math.max(0,t-d),t).addClass(s),e.slice(l).addClass(n),e.slice(l,Math.min(this.numPages,l+d)).addClass(r)}})}),Crocodoc.addModule("layout-vertical-single-column",function(e){"use strict";var t=e.getService("util"),o=e.mixinModule({},"layout-"+Crocodoc.LAYOUT_VERTICAL),a={init:o.init};return t.extend(o,{init:function(e){e.layout=Crocodoc.LAYOUT_VERTICAL_SINGLE_COLUMN,a.init.call(this,e)}})}),Crocodoc.addModule("layout-vertical",function(e){"use strict";var t=e.getService("util"),o=e.getService("browser"),a=e.mixinModule({},"layout-base"),i={init:a.init,handleResize:a.handleResize,handleScroll:a.handleScroll,updateLayout:a.updateLayout};return t.extend(a,{calculateZoomAutoValue:function(){var e=this.state,t=this.calculateZoomValue(Crocodoc.ZOOM_FIT_WIDTH),a=this.calculateZoomValue(Crocodoc.ZOOM_FIT_HEIGHT);return e.widestPage.actualWidth>e.tallestPage.actualHeight?Math.min(1,t,a):o.mobile?t:Math.min(1,t)},calculateCurrentPage:function(){var e,o,a,i=this.state,n=i.pages;return e=t.bisectRight(n,i.scrollTop,"y0"),0>e?1:(o=t.bisectRight(n,i.scrollTop+n[e].height/2,"y0"),a=i.rows[n[o].row],1+a[0])},calculateNextPage:function(){var e=this.state,t=e.pages[e.currentPage-1].row,o=e.rows[t+1];return o&&o[0]+1||e.currentPage},calculatePreviousPage:function(){var e=this.state,t=e.pages[e.currentPage-1].row,o=e.rows[t-1];return o&&o[0]+1||e.currentPage},handleResize:function(e){i.handleResize.call(this,e),this.updateCurrentPage()},handleScroll:function(e){i.handleScroll.call(this,e),this.updateCurrentPage()},updateLayout:function(){var e,t,o,a,i=this.state,n=i.zoomState,s=n.zoom;e=Math.floor(i.widestPage.totalActualWidth*s),t=Math.max(e,i.viewportWidth),o=Math.max(Math.floor(t/s),i.widestPage.totalActualWidth),"resize"===this.zoomStrategy&&(o=t),a=this.$pagesWrapper.height(),this.$pagesWrapper.css({height:"auto",width:o}),a=this.$pagesWrapper.height(),"resize"!==this.zoomStrategy&&(a=Math.floor(a*s)),this.$doc.css({height:Math.max(a,i.viewportHeight),width:t})}})}),Crocodoc.addModule("lazy-loader",function(e){"use strict";function t(e){e=e||w;var t=C.page-1,o=t-e,a=t+e;return m.constrainRange(o,a,g-1)}function o(){var e;clearTimeout(f),S.length>0?(e=S.shift(),T.loadPageIfNecessary(e,function(t){t&&S.unshift(e),f=setTimeout(o,P)})):i()}function a(){clearTimeout(f),b=!1,f=setTimeout(o,P)}function i(){clearTimeout(f),b=!0}function n(e){S.push(e),b&&a()}function s(){S.length=0,i()}function r(e){var t=d[e];if(t&&t.shouldLoad()){if(l(e))return!0;if(u(e))return!0}return!1}function c(e){return l(e)?!1:u(e)?!1:!0}function l(e){var o=t();return e>=o.min&&e<=o.max?!0:!1}function u(e){return m.inArray(e+1,C.visiblePages)>-1}var d,g,h,p,f,m=e.getService("util"),v=e.getService("browser"),T={},S=[],w=1,b=!0,C={page:1,visiblePages:[1]},P=v.mobile||v.ielt10?100:50,y=v.mobile||v.ielt10?8:32;return m.extend(T,{messages:["zoom","resize","pagefocus","scroll","afterscroll","ready"],onmessage:function(e,t){switch(e){case"ready":case"resize":this.loadNecessaryPages();break;case"zoom":this.updateLayoutState(t),this.loadNecessaryPages();break;case"scroll":this.cancelAllLoading();break;case"afterscroll":this.loadNecessaryPages(),clearTimeout(h),h=setTimeout(function(){T.unloadUnnecessaryPages(w)},100);break;case"pagefocus":this.updateLayoutState(t),this.cancelAllLoading(),p=setTimeout(function(){T.loadNecessaryPages()},200)}},init:function(e){d=e,g=d.length,w=Math.min(y,g)},destroy:function(){this.cancelAllLoading()},updateLayoutState:function(e){C=e},loadNecessaryPages:function(){this.cancelAllLoading(),this.queuePageToLoad(C.page-1),this.loadVisiblePages(),this.loadPagesInRange(w)},loadPagesInRange:function(e){var o,a=C.page-1;if(e>0){for(e=t(e),o=a+1;o<=e.max;++o)this.queuePageToLoad(o);for(o=a-1;o>=e.min;--o)this.queuePageToLoad(o)}},loadVisiblePages:function(){var e,t;for(e=0,t=C.visiblePages.length;t>e;++e)this.queuePageToLoad(C.visiblePages[e]-1)},queuePageToLoad:function(e){r(e)&&(d[e].preload(),n(e))},cancelAllLoading:function(){clearTimeout(p),s()},loadPageIfNecessary:function(e,t){r(e)?d[e].load(t):m.isFn(t)&&t()},unloadPage:function(e){var t=d[e];t&&t.unload()},unloadUnnecessaryPages:function(e){var t,o,a=C.page-1,i=a-e,n=a+e;for(e=m.constrainRange(i,n,g-1),t=0,o=d.length;o>t;++t)c(t)&&this.unloadPage(t)}})}),Crocodoc.addModule("page-links",function(e){"use strict";function t(e){var t=$("<a>").addClass(i),o=e.bbox[0],n=e.bbox[1],s={};if(t.css({left:o+"pt",top:n+"pt",width:e.bbox[2]-o+"pt",height:e.bbox[3]-n+"pt"}),e.uri){if(!/^http|^mailto/.test(e.uri))return;s.href=encodeURI(e.uri),s.target="_blank"}else e.destination&&(s.href="#page-"+e.destination.pagenum);t.attr(s),t.data("link",e),t.appendTo(a)}function o(t){var o=$(t.target),a=o.data("link");a&&e.broadcast("linkclicked",a),t.preventDefault()}var a,i="crocodoc-page-link",n=e.getService("support"),s=1;return{init:function(e,t){a=$(e),this.createLinks(t),a.on("click","."+i,o)},destroy:function(){a.empty().off("click")},scale:function(e){s=e,a&&(n.csstransform?a.css({transform:"scale("+e+")"}):n.csszoom&&a.css({zoom:e}))},createLinks:function(e){var o,a;for(o=0,a=e.length;a>o;++o)t(e[o])}}}),Crocodoc.addModule("page-svg",function(e){"use strict";function t(){switch(z){case v:case P:return $("<iframe>");case C:case T:return $("<object>").attr({type:"image/svg+xml",data:"data:image/svg+xml;base64,"+window.btoa(m)});case S:return $('<div style="width:100%; height:100%"">');case w:return $("<object>");case b:return $('<img width="100%" height="100%">')}}function o(){s&&0!==s.length||(M=!1,s=t()),0===s.parent().length&&s.appendTo(r)}function a(e){h?e():$.ajax({url:u+g}).done(function(t,o,a){var i=g.replace("&","&#38;"),n=a.responseText;return n?(n=n.replace(/href="([^"#:]*)"/g,function(e,t){return'href="'+l+t+i+'"'}),n=n.replace(/url\(\"([^"#:]*)\"\)/g,function(e,t){return'url("'+l+t+i+'")'}),h=n,e(),void 0):(e("SVG response was empty"),void 0)}).fail(function(t,o,a){h=null,e(a)})}function i(){var e,t,o,a,i=s[0].contentDocument,r=s[0].contentWindow||i&&i.defaultView;switch(z){case v:O.ie&&O.version<10&&(h=h.replace(/<xhtml:link.*/,"")),a=y.template(p,{css:d+g})+h,i.open(),i.write(a),i.close(),o=i.getElementsByTagName("svg")[0];break;case P:return a=y.template(p,{css:d+g})+y.template(f,{encodedScript:window.btoa("("+n+")()")}),i.open(),i.write(a),i.close(),"complete"===i.readyState?r.loadSVG(h):r.onload=function(){this.loadSVG(h)},void 0;case T:e=new A,t=e.parseFromString(h,"image/svg+xml"),o=i.importNode(t.documentElement,!0),i.documentElement.appendChild(o);break;case C:r.loadSVG(h),o=i.querySelector("svg");break;case S:e=new A,t=e.parseFromString(h,"image/svg+xml"),o=document.importNode(t.documentElement,!0),s.append(o);break;case w:return s.attr({type:"image/svg+xml",data:u+g}),void 0;case b:return s.attr({src:u+g}),void 0}o.setAttribute("width","100%"),o.setAttribute("height","100%")}function n(){window.loadSVG=function(e){var t=new window.DOMParser,o=t.parseFromString(e,"image/svg+xml"),a=document.importNode(o.documentElement,!0);a.setAttribute("width","100%"),a.setAttribute("height","100%"),document.body?document.body.appendChild(a):document.documentElement.appendChild(a)}}var s,r,c,l,u,d,g,h,p='<link rel="stylesheet" href="{{css}}"/><style>html, body { width:100%; height: 100%; margin: 0; overflow: hidden; }</style>',f='<script type="text/javascript" src="data:text/javascript;base64,{{encodedScript}}"></script>',m='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"><script><![CDATA[('+n+")()]]></script></svg>",v=1,T=2,S=3,w=4,b=5,C=6,P=7,y=e.getService("util"),O=e.getService("browser"),A=window.DOMParser,x=!1,M=!1,_=O.ie&&O.version<10||O.mobile,z=O.firefox?C:O.safari?P:v;return{init:function(e,t){r=$(e),c=t,l=c.url,u=c.svgSrc,d=c.cssSrc,g=c.queryString||"",z=c.viewerConfig.embedStrategy||z},destroy:function(){x=!0,r.empty()},preload:function(){o()},load:function(e){var t=function(t){t?M=!1:(0===s.parent().length&&s.appendTo(r),s.show(),M=!0),e&&e(t)};o(),M?t():z===w||z===b?(i(),t()):a(function(e){x||(e||!s||0===s.length?t(e):(i(),t()))})},unload:function(){_?(s.remove(),s=null,M=!1):s.hide()}}}),Crocodoc.addModule("page-text",function(e){"use strict";function t(){return i.viewerConfig.enableTextSelection&&!s.ielt9}var o,a,i,n="crocodoc-page-text",s=e.getService("browser"),r=e.getService("support"),c=e.getService("subpx"),l=!1,u=!1,d=1;return{init:function(e,t){o=$(e),i=t,a=i.textSrc+i.queryString},destroy:function(){o.empty()},load:function(){!t()||l||u||(u=!0,$("<div>").load(a+" ."+n,function(e,t){if("success"!==t)return u=!1,void 0;var a=$(this).children().unwrap();o.attr("class",a.attr("class")),o.html(a.html()),c.fix(o),l=!0,u=!1}))},scale:function(e){d=e,o&&(r.csstransform?o.css({transform:"scale("+e+")",width:100/e+"%",height:100/e+"%"}):r.csszoom&&o.css({zoom:e}))},enable:function(){o.css("display","")},disable:function(){o.css("display","none")}}}),Crocodoc.addModule("page",function(e){"use strict";var t,o,a,i,n,s,r,c,l,u=!1,d="crocodoc-page-inner",g="crocodoc-page-loading",h="crocodoc-page-text",p="crocodoc-page-svg",f="crocodoc-page-links",m="crocodoc-page-overlay";return{messages:["pageavailable","textenabledchange","pagefocus"],onmessage:function(e,t){switch(e){case"pageavailable":(t.page===s+1||t.upto>s)&&c===Crocodoc.PAGE_STATUS_CONVERTING&&(c=Crocodoc.PAGE_STATUS_NOT_LOADED,this.loadIfNecessary());break;case"textenabledchange":t.enabled===!0?this.enableTextSelection():this.disableTextSelection();break;case"pagefocus":r=n===t.page||n in t.visiblePages}},init:function(r,u){var g,v,T,S,w;t=$(r),T=t.find("."+d),S=T.find("."+m),v=T.find("."+p),g=T.find("."+h),w=T.find("."+f),u.url=u.url||"",o=e.createModuleInstance("page-text"),a=e.createModuleInstance("page-svg"),i=e.createModuleInstance("page-links"),o.init(g,u),a.init(v,u),i.init(w,u.links),c=u.status||Crocodoc.PAGE_STATUS_NOT_LOADED,s=u.index,n=s+1,l=u.pageScale||1,this.resize(1)},shouldLoad:function(){return c===Crocodoc.PAGE_STATUS_NOT_LOADED||c===Crocodoc.PAGE_STATUS_CONVERTING},preload:function(){c===Crocodoc.PAGE_STATUS_NOT_LOADED&&a.preload()},load:function(i){function s(o){o?(c=Crocodoc.PAGE_STATUS_NOT_LOADED,e.broadcast("pageerror",{page:n,error:"Error loading page: "+o})):(c=Crocodoc.PAGE_STATUS_LOADED,t.removeClass(g),e.broadcast("pageload",{page:n})),i&&i(o)}return u=!0,c!==Crocodoc.PAGE_STATUS_NOT_LOADED?(i&&i(),void 0):(c=Crocodoc.PAGE_STATUS_LOADING,o.load(),a.load(s),void 0)},loadIfNecessary:function(){u&&this.load()},unload:function(){u=!1,c===Crocodoc.PAGE_STATUS_LOADED&&(a.unload(),c=Crocodoc.PAGE_STATUS_NOT_LOADED,t.addClass(g),e.broadcast("pageunload",{page:n}))},resize:function(e,a){o.scale(e*l),i.scale(e*l),a&&t.css(a)},enableTextSelection:function(){r&&o.load(),o.enable()},disableTextSelection:function(){o.disable()}}}),Crocodoc.addModule("resizer",function(e){"use strict";function t(){e.broadcast("resize",{width:s,height:n})}function o(){a(),r=c.requestAnimationFrame(o,i)}function a(){var e=i.clientHeight||i.innerWidth,o=i.clientWidth||i.innerHeight;e&&(e!==n||o!==s)&&(n=e,s=o,t())}var i,n,s,r,c=(e.getService("util"),e.getService("support")),l=["webkit"," moz"," ",""].join("fullscreenchange");return{messages:["ready"],onmessage:function(e){"ready"===e&&o()},init:function(e){i=$(e).get(0),n=0,s=0,$(document).on(l,t)},destroy:function(){$(document).off(l,t),c.cancelAnimationFrame(r)}}}),Crocodoc.addModule("scroller",function(e){"use strict";function t(){v=!0,T=!1,S=!1,n()}function o(){S=!0,n()}function a(){v=!1,T=!0,w=(new Date).getTime(),S&&i()}function i(){return clearTimeout(u),null===b&&(b=(new Date).getTime()),(new Date).getTime()-b>h?(s(),void 0):(C(),u=setTimeout(i,p),void 0)}function n(){clearTimeout(u),u=setTimeout(s,m),C("onscroll")}function s(){b=null,clearTimeout(u),e.broadcast("afterscroll",c())}function r(){e.broadcast("scroll",c())}function c(){return{scrollTop:l.scrollTop(),scrollLeft:l.scrollLeft()}}var l,u,d=e.getService("util"),g=e.getService("browser"),h=3e3,p=30,f=200,m=g.mobile?500:250,v=!1,T=!1,S=!1,w=0,b=null,C=d.throttle(r,f);return{init:function(e){l=$(e),l.on("scroll",n),l.on("touchstart",t),l.on("touchmove",o),l.on("touchend",a)
},destroy:function(){clearTimeout(u),l.off("scroll",n),l.off("touchstart",t),l.off("touchmove",o),l.off("touchend",a)}}}),Crocodoc.addModule("viewer-api",function(e){"use strict";function t(e){var t;if(!et.url)throw new Error("No URL specified.");t=X.makeAbsolute(et.url)+et.template.json,$.getJSON(t+w).done(function(t){tt||e(t)}).fail(function(e,t,o){tt||f(o)})}function o(){var e;et.url&&(e=X.makeAbsolute(et.url)+et.template.css,S=X.insertStylesheet(e+w))}function a(){et.enable3dTransforms=!1,J.mobile&&(T.addClass(D),et.enable3dTransforms=!0),J.firefox&&(et.enable3dTransforms=!0),et.enable3dTransforms&&T.addClass(G),J.ielt9&&T.addClass(q),K.svg&&T.addClass(B)}function i(){var e=et.metadata;et.numPages=e.numpages,et.pageStart?et.pageStart<0&&(et.pageStart=e.numpages+et.pageStart):et.pageStart=1,et.pageStart=X.clamp(et.pageStart,1,e.numpages),et.pageEnd?et.pageEnd<0&&(et.pageEnd=e.numpages+et.pageEnd):et.pageEnd=e.numpages,et.pageEnd=X.clamp(et.pageEnd,et.pageStart,e.numpages),et.numPages=et.pageEnd-et.pageStart+1}function n(){et.$viewport=$('<div tabindex="-1">').addClass(_),et.$doc=$("<div>").addClass(x),et.$pagesWrapper=$("<div>").addClass(M),et.$doc.append(et.$pagesWrapper),et.$viewport.append(et.$doc),T.html(et.$viewport)}function s(){var e,t,o,a,i,n,s,r,c=X.calculatePtSize(),l=et.metadata.dimensions,u="";for(et.pageScale=Y/(l.width*c),o=et.zoomLevels[et.zoomLevels.length-1],a=3/et.pageScale;a>o;)o+=o/2,et.zoomLevels.push(o);for(l.exceptions=l.exceptions||{},e=et.pageStart-1;e<et.pageEnd;e++)t=e+1,t in l.exceptions?(i=l.exceptions[t].width,n=l.exceptions[t].height):(i=l.width,n=l.height),s=i*c,r=n*c,s*=et.pageScale,r*=et.pageScale,u+=X.template(j,{w:s,h:r});et.$pages=$(u).appendTo(et.$pagesWrapper)}function r(){s(),c(),o(),u(),P=e.createModuleInstance("scroller"),P.init(et.$viewport),y=e.createModuleInstance("resizer"),y.init(et.$viewport),b=e.createModuleInstance("lazy-loader"),b.init(et.pages),et.enableLinks||Q.disableLinks(),T.removeClass(E),Q.setLayout(et.layout),e.broadcast("ready",{page:et.page||1,numPages:et.numPages})}function c(){var t,o,a,i,n,s=[],r=et.pageStart-1,c=et.pageEnd,u=X.makeAbsolute(et.url),d=et.ready?Crocodoc.PAGE_STATUS_NOT_LOADED:Crocodoc.PAGE_STATUS_CONVERTING,g=l();for(t=r;c>t;t++)a=u+X.template(et.template.svg,{page:t+1}),i=u+X.template(et.template.html,{page:t+1}),n=u+et.template.css,o=e.createModuleInstance("page"),o.init(et.$pages.eq(t-r),{index:t,url:u,svgSrc:a,textSrc:i,cssSrc:n,status:d,queryString:w,viewerConfig:et,links:g[t],pageScale:et.pageScale}),s.push(o);et.pages=s}function l(){var e,t,o,a=et.metadata.links||[],i=[];for(e=0,t=et.metadata.numpages;t>e;++e)i[e]=[];for(e=0,t=a.length;t>e;++e)o=a[e],i[o.pagenum-1].push(o);return i}function u(){$(document).on("mouseup",m)}function d(){T.hasClass(L)||T.addClass(L)}function g(){T.hasClass(L)&&T.removeClass(L)}function h(e){e.uri?window.open(e.uri):e.destination&&Q.scrollTo(e.destination.pagenum)}function p(e){return e?(et.metadata=e,i(),r(),void 0):(f("response was empty"),void 0)}function f(t){t=t||"unknown error",e.broadcast("fail",{error:"Error loading document metadata: "+t})}function m(){v()}function v(){var e=X.getSelectedNode(),t=$(e).closest("."+R);T.find("."+I).removeClass(I),e&&T.has(e)&&t.addClass(I)}var T,S,w,b,C,P,y,O="crocodoc-",A=O+"viewer",x=O+"doc",M=O+"pages",_=O+"viewport",z=O+"zooming",L=O+"scrolling",E=O+"loading",I=O+"text-selected",Z=O+"text-disabled",N=O+"links-disabled",R=O+"page",k=R+"-inner",H=R+"-svg",W=R+"-text",V=R+"-links",F=R+"-overlay",U=R+"-loading",D=O+"mobile",G=O+"3d-enabled",q=O+"ielt9",B=O+"supports-svg",j='<div class="'+R+" "+U+'" '+'style="width:{{w}}px; height:{{h}}px;" data-width="{{w}}" data-height="{{h}}">'+'<div class="'+k+'">'+'<div class="'+H+'"></div>'+'<div class="'+F+'"></div>'+'<div class="'+W+'"></div>'+'<div class="'+V+'"></div>'+"</div>"+"</div>",Y=1024,X=e.getService("util"),J=e.getService("browser"),K=e.getService("support"),Q=new Crocodoc.EventTarget,et={template:{svg:"page-{{page}}.svg",html:"text-{{page}}.html",css:"stylesheet.css",json:"info.json"},queryParams:null,ready:!0,zoom:Crocodoc.ZOOM_AUTO,pageStart:null,pageEnd:null,zoomLevels:[.25,.5,.75,1,1.25,1.5,2,3]},tt=!1;return X.extend(Q,{messages:["ready","zoom","resize","destroy","fail","pagefocus","pageload","pageunload","pageerror","resize","scroll","afterscroll","linkclicked"],onmessage:function(e,t){switch(e){case"scroll":d(t);break;case"afterscroll":g(t);break;case"linkclicked":h(t);break;case"zoom":t.zoom*=et.pageScale,t.prevZoom*=et.pageScale,this.fire(e,t);break;default:this.fire(e,t)}},init:function(e,t){if(et=X.extend(!0,et,Crocodoc.Viewer.defaults,t),w=et.queryParams&&"?"+$.param(et.queryParams)||"",et.$el=T=$(e),0===T.length)throw new Error("Invalid container element");T.addClass(A),a(),n()},destroy:function(){var t,o=function(){};$(document).off("mouseup",m),T.empty().removeClass(function(e,t){var o=t.match(new RegExp("crocodoc\\S+","g"));return o&&o.join(" ")}),$(S).remove();for(t in Q)Q.hasOwnProperty(t)&&X.isFn(Q[t])&&(Q[t]=o);tt=!0,e.broadcast("destroy"),e.destroy()},load:function(){et.url&&!/\/$/.test(et.url)&&(et.url+="/"),T.addClass(E),t(p)},zoom:function(e){var t=parseFloat(e);t&&(e=t/(et.pageScale||1)),T.addClass(z),C.setZoom(e),T.removeClass(z)},scrollTo:function(e){C.scrollTo(e)},scrollBy:function(e,t){C.scrollBy(e,t)},setLayout:function(t){var o=et.page,a=et.zoom;if(C){if(t===et.layout)return;o=C.state.currentPage,a=C.state.zoomState,e.removeModuleInstance(C)}if(et.layout=t,C=e.createModuleInstance("layout-"+t),!C)throw new Error("Invalid layout "+t);C.init(et),C.setZoom(a.zoomMode||a.zoom||a),C.scrollTo(o)},enableTextSelection:function(){T.removeClass(Z),et.enableTextSelection=!0,e.broadcast("textenabledchange",{enabled:!0})},disableTextSelection:function(){T.addClass(Z),et.enableTextSelection=!1,e.broadcast("textenabledchange",{enabled:!1})},enableLinks:function(){T.removeClass(N)},disableLinks:function(){T.addClass(N)},setPageAvailable:function(t){e.broadcast("pageavailable",{page:t})},setPagesAvailableUpTo:function(t){e.broadcast("pageavailable",{upto:t})},focus:function(){et.$viewport.focus()}})});